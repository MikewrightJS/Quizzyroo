{"ast":null,"code":"/*!\n* Tobi - CookieJar\n* Copyright(c) 2010 LearnBoost <dev@learnboost.com>\n* MIT Licensed\n*/\n\n/**\n* Module dependencies.\n*/\nvar url = require('url');\n/**\n* Initialize a new `CookieJar`.\n*\n* @api private\n*/\n\n\nvar CookieJar = exports = module.exports = function CookieJar() {\n  this.cookies = [];\n};\n/**\n* Add the given `cookie` to the jar.\n*\n* @param {Cookie} cookie\n* @api private\n*/\n\n\nCookieJar.prototype.add = function (cookie) {\n  this.cookies = this.cookies.filter(function (c) {\n    // Avoid duplication (same path, same name)\n    return !(c.name == cookie.name && c.path == cookie.path);\n  });\n  this.cookies.push(cookie);\n};\n/**\n* Get cookies for the given `req`.\n*\n* @param {IncomingRequest} req\n* @return {Array}\n* @api private\n*/\n\n\nCookieJar.prototype.get = function (req) {\n  var path = url.parse(req.url).pathname,\n      now = new Date(),\n      specificity = {};\n  return this.cookies.filter(function (cookie) {\n    if (0 == path.indexOf(cookie.path) && now < cookie.expires && cookie.path.length > (specificity[cookie.name] || 0)) return specificity[cookie.name] = cookie.path.length;\n  });\n};\n/**\n* Return Cookie string for the given `req`.\n*\n* @param {IncomingRequest} req\n* @return {String}\n* @api private\n*/\n\n\nCookieJar.prototype.cookieString = function (req) {\n  var cookies = this.get(req);\n\n  if (cookies.length) {\n    return cookies.map(function (cookie) {\n      return cookie.name + '=' + cookie.value;\n    }).join('; ');\n  }\n};","map":{"version":3,"sources":["C:/react/quiz/node_modules/cookie-jar/jar.js"],"names":["url","require","CookieJar","exports","module","cookies","prototype","add","cookie","filter","c","name","path","push","get","req","parse","pathname","now","Date","specificity","indexOf","expires","length","cookieString","map","value","join"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AAEA,IAAIA,GAAG,GAAGC,OAAO,CAAC,KAAD,CAAjB;AAEA;AACA;AACA;AACA;AACA;;;AAEA,IAAIC,SAAS,GAAGC,OAAO,GAAGC,MAAM,CAACD,OAAP,GAAiB,SAASD,SAAT,GAAqB;AAC9D,OAAKG,OAAL,GAAe,EAAf;AACD,CAFD;AAIA;AACA;AACA;AACA;AACA;AACA;;;AAEAH,SAAS,CAACI,SAAV,CAAoBC,GAApB,GAA0B,UAASC,MAAT,EAAgB;AACxC,OAAKH,OAAL,GAAe,KAAKA,OAAL,CAAaI,MAAb,CAAoB,UAASC,CAAT,EAAW;AAC5C;AACA,WAAO,EAAEA,CAAC,CAACC,IAAF,IAAUH,MAAM,CAACG,IAAjB,IAAyBD,CAAC,CAACE,IAAF,IAAUJ,MAAM,CAACI,IAA5C,CAAP;AACD,GAHc,CAAf;AAIA,OAAKP,OAAL,CAAaQ,IAAb,CAAkBL,MAAlB;AACD,CAND;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEAN,SAAS,CAACI,SAAV,CAAoBQ,GAApB,GAA0B,UAASC,GAAT,EAAa;AACrC,MAAIH,IAAI,GAAGZ,GAAG,CAACgB,KAAJ,CAAUD,GAAG,CAACf,GAAd,EAAmBiB,QAA9B;AAAA,MACIC,GAAG,GAAG,IAAIC,IAAJ,EADV;AAAA,MAEIC,WAAW,GAAG,EAFlB;AAGA,SAAO,KAAKf,OAAL,CAAaI,MAAb,CAAoB,UAASD,MAAT,EAAgB;AACzC,QAAI,KAAKI,IAAI,CAACS,OAAL,CAAab,MAAM,CAACI,IAApB,CAAL,IAAkCM,GAAG,GAAGV,MAAM,CAACc,OAA/C,IACCd,MAAM,CAACI,IAAP,CAAYW,MAAZ,IAAsBH,WAAW,CAACZ,MAAM,CAACG,IAAR,CAAX,IAA4B,CAAlD,CADL,EAEE,OAAOS,WAAW,CAACZ,MAAM,CAACG,IAAR,CAAX,GAA2BH,MAAM,CAACI,IAAP,CAAYW,MAA9C;AACH,GAJM,CAAP;AAKD,CATD;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEArB,SAAS,CAACI,SAAV,CAAoBkB,YAApB,GAAmC,UAAST,GAAT,EAAa;AAC9C,MAAIV,OAAO,GAAG,KAAKS,GAAL,CAASC,GAAT,CAAd;;AACA,MAAIV,OAAO,CAACkB,MAAZ,EAAoB;AAClB,WAAOlB,OAAO,CAACoB,GAAR,CAAY,UAASjB,MAAT,EAAgB;AACjC,aAAOA,MAAM,CAACG,IAAP,GAAc,GAAd,GAAoBH,MAAM,CAACkB,KAAlC;AACD,KAFM,EAEJC,IAFI,CAEC,IAFD,CAAP;AAGD;AACF,CAPD","sourcesContent":["/*!\n* Tobi - CookieJar\n* Copyright(c) 2010 LearnBoost <dev@learnboost.com>\n* MIT Licensed\n*/\n\n/**\n* Module dependencies.\n*/\n\nvar url = require('url');\n\n/**\n* Initialize a new `CookieJar`.\n*\n* @api private\n*/\n\nvar CookieJar = exports = module.exports = function CookieJar() {\n  this.cookies = [];\n};\n\n/**\n* Add the given `cookie` to the jar.\n*\n* @param {Cookie} cookie\n* @api private\n*/\n\nCookieJar.prototype.add = function(cookie){\n  this.cookies = this.cookies.filter(function(c){\n    // Avoid duplication (same path, same name)\n    return !(c.name == cookie.name && c.path == cookie.path);\n  });\n  this.cookies.push(cookie);\n};\n\n/**\n* Get cookies for the given `req`.\n*\n* @param {IncomingRequest} req\n* @return {Array}\n* @api private\n*/\n\nCookieJar.prototype.get = function(req){\n  var path = url.parse(req.url).pathname\n    , now = new Date\n    , specificity = {};\n  return this.cookies.filter(function(cookie){\n    if (0 == path.indexOf(cookie.path) && now < cookie.expires\n      && cookie.path.length > (specificity[cookie.name] || 0))\n      return specificity[cookie.name] = cookie.path.length;\n  });\n};\n\n/**\n* Return Cookie string for the given `req`.\n*\n* @param {IncomingRequest} req\n* @return {String}\n* @api private\n*/\n\nCookieJar.prototype.cookieString = function(req){\n  var cookies = this.get(req);\n  if (cookies.length) {\n    return cookies.map(function(cookie){\n      return cookie.name + '=' + cookie.value;\n    }).join('; ');\n  }\n};\n"]},"metadata":{},"sourceType":"script"}